title: Home
path: home
icon: mdi:home
background: var(--background-image)

cards:
  - type: custom:compact-custom-header
    header: true
    menu: false
    notification: false
    voice: false
    options: true
    clock: options
    clock_format: 2
    background_image: true

## OCCUPANTS
  - type: vertical-stack
    cards:
    - type: horizontal-stack
      cards:
      - type: picture-elements
        entity: device_tracker.matt
        image: /local/people/matt.jpg
        state_image:
          "home": /local/people/matt.jpg
          "not_home": /local/people/matt-bw.jpg
          "Matt Work": /local/people/matt-work.jpg
        elements:
          - type: state-label
            entity: device_tracker.matt
            style: {color: white, font-size: 18px, bottom: 0%, background-color: "rgba(0, 0, 0, 0.4)", width: 100%, transform: initial, font-weight: bold}
          - type: state-icon
            style: {color: white, bottom: 0%, right: 0%, transform: initial}
            entity: sensor.matt_battery_level
          - type: state-label
            style: {color: white, bottom: 0%, right: 25px, font-size: 15px, transform: initial}
            entity: sensor.matt_battery_level
      - type: picture-elements
        entity: device_tracker.sarah
        image: /local/people/sarah.jpg
        state_image:
          "home": /local/people/sarah.jpg
          "not_home": /local/people/sarah-bw.jpg
          "Sarah Work": /local/people/sarah-work.jpg
        elements:
          - type: state-label
            entity: device_tracker.sarah
            style: {color: white, font-size: 18px, bottom: 0%, background-color: "rgba(0, 0, 0, 0.4)", width: 100%, transform: initial, font-weight: bold}
          - type: state-icon
            style: {color: white, bottom: 0%, right: 0%, transform: initial}
            entity: sensor.sarah_battery_level
          - type: state-label
            style: {color: white, bottom: 0%, right: 25px, font-size: 15px, transform: initial}
            entity: sensor.sarah_battery_level
    - type: conditional
      conditions:
        - entity: input_select.home_status
          state_not: 'Home'
      card:
        type: map
        aspect_ratio: 4:3
        default_zoom: 12
        entities:
          - device_tracker.matt
          - device_tracker.sarah
    - type: "custom:calendar-card"
      name: Upcoming Events
      entities:
        - calendar.matt
        - calendar.joint
        - calendar.sarah
      numberOfDays: 14
      showProgressBar: false

## GUESTS
    - type: entity-filter
      show_empty: false
      entities:
        - device_tracker.aimee
        - device_tracker.james
        - device_tracker.katt
        - device_tracker.rashida
      state_filter:
        - 'home'
      card:
        type: glance
        title: 'Guests'
        show_state: false

    - type: conditional
      conditions:
        - entity: group.guests
          state: 'home'
      card:
        type: entities
        title: Guest Options
        show_header_toggle: false
        entities:
          - input_boolean.guests_staying
          - input_boolean.entertaining

  - type: vertical-stack
    cards:
    - type: custom:simple-weather-card
      entity: weather.dark_sky
      backdrop: true
      name: "in Southampton"
    - type: conditional
      conditions:
        - entity: input_select.home_status
          state: 'Home'
      card:
        type: thermostat
        entity: climate.hallway
    - type: horizontal-stack
      cards:
        - type: custom:mini-graph-card
          name: Indoor Temp
          entities:
            - sensor.average_home_temperature
          more_info: false
          show:
            points: hover
            fill: true
          animate: true
          line_width: 8
          color: var(--accent-color-2)
        - type: custom:mini-graph-card
          name: Outdoor Temp
          entities:
            - sensor.darksky_temperature
          more_info: false
          show:
            points: hover
            fill: true
          animate: true
          line_width: 8
          color: var(--accent-color-2)
    - type: horizontal-stack
      cards:
        - type: custom:mini-graph-card
          entities:
            - sensor.chance_of_rain
          more_info: false
          show:
            points: hover
            fill: true
          animate: true
          line_width: 8
          color: var(--accent-color-4)
        - type: custom:mini-graph-card
          name: Cloud Coverage
          entities:
            - sensor.darksky_cloud_coverage
          more_info: false
          show:
            points: hover
            fill: true
          animate: true
          line_width: 8
          color: var(--accent-color-6)




## ACTIVE DEVICES
  - type: vertical-stack
    cards:

    - type: conditional
      conditions:
        - entity: binary_sensor.workday_sensor
          state: "on"
        - entity: sensor.time_of_day
          state: "Morning"
      card:
        type: vertical-stack
        cards:
          - type: custom:mini-graph-card
            entities:
              - sensor.morning_commute
            more_info: false
            show:
              points: hover
              fill: true
            animate: true
            hours_to_show: 6
            line_width: 4
            points_per_hour: 2
            color: var(--accent-color)
    - type: conditional
      conditions:
        - entity: binary_sensor.workday_sensor
          state: "on"
        - entity: sensor.time_of_day
          state: "Afternoon"
      card:
        type: vertical-stack
        cards:
          - type: custom:mini-graph-card
            entities:
              - sensor.evening_commute
            more_info: false
            show:
              points: hover
              fill: true
            animate: true
            hours_to_show: 6
            line_width: 4
            points_per_hour: 2
            color: var(--accent-color)

    - type: conditional
      conditions:
        - entity: input_boolean.alarm_clock
          state: "on"
      card:
        type: markdown
        title: Alarm
        content: >
          The wake-up alarm is set for {{ sensor.alarm_time }}.
    - type: entity-filter
      show_empty: false
      entities:
        - light.lounge
        - light.dining_room
        - light.kitchen
        - light.master_bedroom
        - light.guest_bedroom
        - light.office
        - light.hallway
        - light.landing
        - switch.fairy_lights
        - switch.star_lamp
        - switch.lounge_snowflakes
        - switch.christmas_tree
        - switch.festoon_lights

      state_filter:
        - 'on'
      card:
        type: entities
        title: Lights On
        show_state: false

    - type: glance
      title: Christmas
      entities:
        - entity: switch.fairy_lights
          name: Fairy
          tap_action:
            action: toggle
        - entity: switch.christmas_tree
          name: Tree
          tap_action:
            action: toggle
        - entity: switch.lounge_snowflakes
          name: Window
          tap_action:
            action: toggle
        - entity: switch.star_lamp
          name: Star
          tap_action:
            action: toggle
        - entity: automation.xmas_lights_on_pm
          name: On PM
          tap_action:
            action: toggle
        - entity: automation.xmas_lights_on_am
          name: On AM
          tap_action:
            action: toggle

    - type: entity-filter
      show_empty: false
      show_header_toggle: false
      state_filter:
        - 'playing'
      entities:
        - entity: media_player.philips_tv
          type: custom:mini-media-player
          group: true
        - entity: media_player.playstation_4
          type: custom:mini-media-player
          group: true
        - entity: media_player.bedroom
          type: custom:mini-media-player
          group: true
        - entity: media_player.office
          type: custom:mini-media-player
          group: true
        - entity: media_player.lounge
          type: custom:mini-media-player
          group: true
        - entity: media_player.dining_room
          type: custom:mini-media-player
          group: true
      card:
        type: entities
        show_header_toggle: false
        title: Media Playing
#    - type: 'custom:spotify-card'
#      client_id: !secret spotify_client_id
#      limit: 10
